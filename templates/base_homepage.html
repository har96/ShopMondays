<!DOCTYPE html>
<html>
	<head>
		<link type="text/css" rel="stylesheet" href="/static/main.css"/>

		<script type="text/javascript">
			
			function show_bid()
			{
				if ("{{item.seller}}" == "{{user.name}}") {
					document.getElementById("bid-box").innerHTML = "You cannot bid on items you sell";
					return;
				}
				var button = "<button type=\"submit\">Bid!</button>";
				var input = "<label>Bid price </label><input name=\"price\"/>";
				var msg = "<br>You must bid {{item.bid_margin}} over price";
				document.getElementById("bid-box").innerHTML = input + "&nbsp;\n" + button + msg;
			}
		
			function clock()
			{
				setInterval(function(){showTime()}, 1000);
			}
			function showTime()
			{
				var dte = new Date();
				var time = dte.toLocaleTimeString();

				var weekdays = new Array(7);
				weekdays[0] = "Sunday";
				weekdays[1] = "Monday";
				weekdays[2] = "Tuesday";
				weekdays[3] = "Wednesday";
				weekdays[4] = "Thursday";
				weekdays[5] = "Friday";
				weekdays[6] = "Saturday";
				var clock = document.getElementById("clock");
				clock.innerHTML = weekdays[dte.getDay()] + "  " + time;
			}

			// This function was copied and pasted from http://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit
			// many thanks to the author
			function post_to_url(path, params, method) {
				method = method || "post"; // Set method to post by default, if not specified.

			   	var form = document.createElement("form");
			    	form.setAttribute("method", method);
			    	form.setAttribute("action", path);

				for(var key in params) {
       					if(params.hasOwnProperty(key)) {
				       	     var hiddenField = document.createElement("input");
       					     hiddenField.setAttribute("type", "hidden");
       					     hiddenField.setAttribute("name", key);
       					     hiddenField.setAttribute("value", params[key]);
	
       					     form.appendChild(hiddenField);
       					  }
   				 }

				 document.body.appendChild(form);
			     	 form.submit();
			}
			function delete_item(bids, id) {
				var msg = "Are you sure you want to delete this item? ";
				if (bids > 0) {
					msg = msg + "There are bids on the item.";
				}
				var del = confirm(msg);
				if (!del) {
					return;
				}
				post_to_url("/edit/"+string(id), {"delete":"delete"}, "post");
			}

		</script>

		<title>Mondays! Where everyday is cyber-monday!</title>
	</head>
	<body onLoad="clock()">
		<img src="/static/images/top_banner.jpg" id="banner" alt="banner" width=1300 height=280px/>
		<span id="clock" align="right">time</span>
		<ul class="navigation">
			<li><a href="/home" class="header-link">Home</a></li>
			<li><a href="/shop" class="header-link">Shop</a></li>
			<li><a href="/message" class="header-link">Create a Message</a></li>
			<li><a href="/newitem" class="header-link">List an Item</a></li>
			<li><a href="/request" class="header-link">Send a Request</a></li>
			<li><a href="/users" class="header-link">Users</a></li>
			<li><a href="/logout" class="header-link">Logout</a></li>
		</div>
		<div id="body">
			{% block content %}
			{% endblock %}
		</div>
		<img src="/static/images/left_bar.jpg" id="left-bar" alt="left bar" height=100%/>
		<img src="/static/images/right_bar.jpg" id="right-bar" alt="right bar" height=100%/>
	</body>
</html>
